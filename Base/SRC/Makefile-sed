#

CDOTH_D  = ../../PRIMMESRC/DSRC/convergence_d.h  \
	../../PRIMMESRC/DSRC/globalsum_d.h  \
	../../PRIMMESRC/DSRC/correction_d.h \
	../../PRIMMESRC/DSRC/factorize_d.h  \
	../../PRIMMESRC/DSRC/init_d.h \
	../../PRIMMESRC/DSRC/inner_solve_d.h  \
	../../PRIMMESRC/DSRC/locking_d.h  \
	../../PRIMMESRC/DSRC/main_iter_d.h  \
	../../PRIMMESRC/DSRC/main_iter_private_d.h  \
	../../PRIMMESRC/DSRC/numerical_d.h  \
	../../PRIMMESRC/DSRC/numerical_private_d.h\
	../../PRIMMESRC/DSRC/ortho_d.h  \
	../../PRIMMESRC/DSRC/primme_private_d.h  \
	../../PRIMMESRC/DSRC/restart_d.h  \
	../../PRIMMESRC/DSRC/solve_H_d.h  \
	../../PRIMMESRC/DSRC/solve_H_private_d.h  \
	../../PRIMMESRC/DSRC/update_W_d.h  \
	../../PRIMMESRC/DSRC/update_projection_d.h  

CDOTH_Z = ../../PRIMMESRC/ZSRC/convergence_z.h \
	../../PRIMMESRC/ZSRC/globalsum_z.h  \
	../../PRIMMESRC/ZSRC/correction_z.h \
	../../PRIMMESRC/ZSRC/factorize_z.h \
	../../PRIMMESRC/ZSRC/init_z.h \
	../../PRIMMESRC/ZSRC/inner_solve_z.h \
	../../PRIMMESRC/ZSRC/locking_z.h \
	../../PRIMMESRC/ZSRC/main_iter_z.h \
	../../PRIMMESRC/ZSRC/main_iter_private_z.h \
	../../PRIMMESRC/ZSRC/numerical_z.h \
	../../PRIMMESRC/ZSRC/numerical_private_z.h\
	../../PRIMMESRC/ZSRC/ortho_z.h \
	../../PRIMMESRC/ZSRC/primme_private_z.h \
	../../PRIMMESRC/ZSRC/restart_z.h \
	../../PRIMMESRC/ZSRC/solve_H_z.h \
	../../PRIMMESRC/ZSRC/solve_H_private_z.h \
	../../PRIMMESRC/ZSRC/update_W_z.h \
	../../PRIMMESRC/ZSRC/update_projection_z.h 

CSOURCE_Z = ../../PRIMMESRC/ZSRC/convergence_z.c \
	../../PRIMMESRC/ZSRC/globalsum_z.c \
	../../PRIMMESRC/ZSRC/correction_z.c \
	../../PRIMMESRC/ZSRC/primme_z.c \
	../../PRIMMESRC/ZSRC/init_z.c \
        ../../PRIMMESRC/ZSRC/inner_solve_z.c \
	../../PRIMMESRC/ZSRC/main_iter_z.c \
	../../PRIMMESRC/ZSRC/factorize_z.c \
	../../PRIMMESRC/ZSRC/numerical_z.c \
	../../PRIMMESRC/ZSRC/ortho_z.c \
	../../PRIMMESRC/ZSRC/restart_z.c \
	../../PRIMMESRC/ZSRC/locking_z.c \
	../../PRIMMESRC/ZSRC/solve_H_z.c \
	../../PRIMMESRC/ZSRC/update_projection_z.c \
	../../PRIMMESRC/ZSRC/update_W_z.c 

CSOURCE_D = ../../PRIMMESRC/DSRC/convergence_d.c \
	../../PRIMMESRC/DSRC/globalsum_d.c \
	../../PRIMMESRC/DSRC/correction_d.c \
	../../PRIMMESRC/DSRC/primme_d.c \
	../../PRIMMESRC/DSRC/init_d.c \
        ../../PRIMMESRC/DSRC/inner_solve_d.c \
	../../PRIMMESRC/DSRC/main_iter_d.c \
	../../PRIMMESRC/DSRC/factorize_d.c \
	../../PRIMMESRC/DSRC/numerical_d.c \
	../../PRIMMESRC/DSRC/ortho_d.c \
	../../PRIMMESRC/DSRC/restart_d.c \
	../../PRIMMESRC/DSRC/locking_d.c \
	../../PRIMMESRC/DSRC/solve_H_d.c \
	../../PRIMMESRC/DSRC/update_projection_d.c \
	../../PRIMMESRC/DSRC/update_W_d.c

all: $(CSOURCE_D) $(CSOURCE_Z) $(FSOURCE_Z) $(CDOTH_D) $(CDOTH_Z)\
	 depends_Z depends_D
complex: $(CSOURCE_Z) $(CDOTH_Z) depends_Z
real: $(CSOURCE_D) $(CDOTH_D) depends_D

#---------  PRIMMESRC/ZSRC   .h files -------------------------

../../PRIMMESRC/ZSRC/globalsum_z.h: globalsum.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/convergence_z.h: convergence.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/correction_z.h: correction.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/factorize_z.h: factorize.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/init_z.h: init.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/inner_solve_z.h: inner_solve.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/locking_z.h: locking.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/main_iter_z.h: main_iter.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/main_iter_private_z.h: main_iter_private.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/numerical_z.h: numerical.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/numerical_private_z.h: numerical_private.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/ortho_z.h: ortho.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/primme_private_z.h: primme_private.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/restart_z.h: restart.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/solve_H_z.h: solve_H.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/update_W_z.h: update_W.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/update_projection_z.h: update_projection.base.h
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

# -------------- PRIMMESRC/ZSRC  .c  files --------------------
../../PRIMMESRC/ZSRC/globalsum_z.c: globalsum.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/convergence_z.c: convergence.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/correction_z.c: correction.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/primme_z.c: primme.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/init_z.c: init.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

#../../PRIMMESRC/ZSRC/inner_solve_z.c: inner_solve.base_v111.c
#../../PRIMMESRC/ZSRC/inner_solve_z.c: inner_solve.base_newTemp.c
../../PRIMMESRC/ZSRC/inner_solve_z.c: inner_solve.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/main_iter_z.c: main_iter.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/factorize_z.c: factorize.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/numerical_z.c: numerical.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/ortho_z.c: ortho.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/restart_z.c: restart.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/locking_z.c: locking.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/solve_H_z.c: solve_H.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/update_projection_z.c: update_projection.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

../../PRIMMESRC/ZSRC/update_W_z.c: update_W.base.c
	sed -f SampleMakes/arithmetics/cz.sed $< > $@

# ============== PRIMMESRC/DSRC .h files ========================

../../PRIMMESRC/DSRC/globalsum_d.h: globalsum.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/convergence_d.h: convergence.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/correction_d.h: correction.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/factorize_d.h: factorize.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/init_d.h: init.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/inner_solve_d.h: inner_solve.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/locking_d.h: locking.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/main_iter_d.h: main_iter.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/main_iter_private_d.h: main_iter_private.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/numerical_d.h: numerical.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/numerical_private_d.h: numerical_private.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/ortho_d.h: ortho.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/primme_private_d.h: primme_private.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/restart_d.h: restart.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/solve_H_d.h: solve_H.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/update_W_d.h: update_W.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/update_projection_d.h: update_projection.base.h
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

# ============== PRIMMESRC/DSRC .c files ========================
../../PRIMMESRC/DSRC/globalsum_d.c: globalsum.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/convergence_d.c: convergence.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/correction_d.c: correction.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/primme_d.c: primme.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/init_d.c: init.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

#../../PRIMMESRC/DSRC/inner_solve_d.c: inner_solve.base_v111.c
#../../PRIMMESRC/DSRC/inner_solve_d.c: inner_solve.base_newTemp.c
../../PRIMMESRC/DSRC/inner_solve_d.c: inner_solve.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/main_iter_d.c: main_iter.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/factorize_d.c: factorize.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/numerical_d.c: numerical.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/ortho_d.c: ortho.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/restart_d.c: restart.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/locking_d.c: locking.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/solve_H_d.c: solve_H.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/update_projection_d.c: update_projection.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

../../PRIMMESRC/DSRC/update_W_d.c: update_W.base.c
	sed -f SampleMakes/arithmetics/cd.sed $< > $@

#
# Make dependencies in the two directories
#
#
depends_Z:
	@(\
	cd ../../PRIMMESRC/ZSRC/;\
	gcc -I../COMMONSRC/ -MM *.c > dependencies ; \
	)

depends_D:
	@(\
	cd ../../PRIMMESRC/DSRC/;\
	gcc -I../COMMONSRC/ -MM *.c > dependencies ;\
	)
#
#  clean	- remove all object files
#
clean:
	echo 'Cleaning up PRIMMESRC/ZSRC and PRIMMESRC/DSRC directories'
	rm -f $(CSOURCE_Z) $(FSOURCE_Z) $(CDOTH_Z)
	rm -f $(CSOURCE_D) $(CDOTH_D )
	rm -f a.out core
